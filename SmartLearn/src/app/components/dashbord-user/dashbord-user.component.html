<div class="container mt-4">
  <!-- Welcome Section -->
  <div class="mb-4">
    <h2>Welcome back, {{ studentName }}!</h2>
    <p class="text-muted">Continue your learning journey and achieve your goals.</p>
  </div>

  <!-- Stats Cards -->
  <div class="row text-center mb-4">
    <div class="col-md-3 mb-3" *ngFor="let stat of [
      { title: 'Enrolled Courses', icon: 'bi-book', value: stats.enrolled, color: 'text-primary' },
      { title: 'Completed', icon: 'bi-award', value: stats.completed, color: 'text-success' },
      { title: 'Learning Hours', icon: 'bi-clock-history', value: stats.hours, color: 'text-info' },
      { title: 'Certificates', icon: 'bi-graph-up-arrow', value: stats.certificates, color: 'text-warning' }
    ]">
      <div class="card shadow-sm border-0 p-3">
        <h5>{{ stat.title }}</h5>
        <i class="bi {{ stat.icon }} fs-2 {{ stat.color }}"></i>
        <h3>{{ stat.value }}</h3>
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-pills mb-3 justify-content-center" id="pills-tab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#courses" type="button">
        My Courses
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="pill" data-bs-target="#recommendations" type="button">
        Recommendations
      </button>
    </li>

  </ul>

  <!-- Tabs Content -->
  <div class="tab-content">
    <!-- My Courses -->
    <div class="tab-pane fade show active" id="courses">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>My Courses</h4>
        <button class="btn btn-primary">Browse More Courses</button>
      </div>

      <!-- Message if no enrollments -->
      <div *ngIf="enrollments.length === 0" class="text-center mt-4">
        <p>You are not enrolled in any courses yet.</p>
      </div>

      <!-- Courses Grid -->
      <div class="row" *ngIf="enrollments.length > 0">
        <div class="col-md-4 mb-3" *ngFor="let enrollment of enrollments">
          <div class="card h-100 shadow-sm" style="max-height: 400px; overflow: hidden;">
            <!-- Course Image -->
            <img [src]="enrollment.courseId?.coverImageURL" class="card-img-top img-fluid"
              alt="{{ enrollment.courseId?.title }}" style="height: 180px; object-fit: cover;" />

            <div class="card-body d-flex flex-column">
              <!-- Course Title -->
              <h5 class="card-title">{{ enrollment.courseId?.title }}</h5>

              <!-- Progress -->
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span>{{ enrollment.progress || 0 }}%</span>
                <span class="badge bg-primary">
                  {{ (enrollment.progress || 0) === 100 ? 'Completed' : 'In Progress' }}
                </span>
              </div>

              <div class="progress mb-3">
                <div class="progress-bar" role="progressbar" [style.width.%]="enrollment.progress || 0"></div>
              </div>

              <!-- Continue / View Certificate Button -->
             <button
  class="btn btn-outline-primary mt-auto w-100"
  (click)="goTolesson(enrollment.courseId?._id)">
  {{ (enrollment.progress || 0) === 100 ? 'View Certificate' : 'Continue' }}
</button>

          <!-- Message Button -->
          <button
          class="btn btn-outline-success mt-2 w-100"
          (click)="messageInstructor(enrollment.courseId?.instructorID)">
          Message Instructor
          </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recommendations -->
    <div class="tab-pane fade" id="recommendations">
      <h5>Recommended courses will appear here</h5>
    </div>


</div>
