<div class="container mt-5">
  <!-- Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ -->
  <button class="btn btn-secondary mb-4" (click)="goBack()">
    â† Go Back
  </button>

  <h2 class="mb-4 text-center">ğŸ‘¥ Users Management</h2>

  <!-- Ù„ÙˆØ¯ÙŠÙ†Ø¬ -->
  <div *ngIf="loading && !searchQuery" class="text-center mb-4">
    <div class="spinner-border text-primary"></div>
  </div>

  <!-- Ù…ÙÙŠØ´ ÙŠÙˆØ²Ø±Ø² -->
  <div *ngIf="!loading && users.length === 0 && !searchQuery" class="alert alert-info text-center">
    Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† âœ…
  </div>

  <!-- input search -->
  <div class="position-relative mb-4">
    <input 
      type="text" 
      class="form-control" 
      placeholder="ğŸ” Search users..." 
      (input)="onSearch($event)"
    >

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« -->
    <ul *ngIf="searchResults.length > 0" class="list-group shadow mt-2">
      <li 
        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" 
        *ngFor="let user of searchResults" 
        (click)="goToDetails(user._id)"
        style="cursor: pointer;"
      >
        <div>
          ğŸ‘¤ <strong>{{ user.name }}</strong> <br>
          ğŸ“§ {{ user.email }}
        </div>
        <span class="badge bg-primary">View</span>
      </li>
    </ul>
  </div>

  <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø§Ø¯ÙŠ (Ù„Ùˆ Ø§Ù„Ø³ÙŠØ±Ø´ ÙØ§Ø¶ÙŠ) -->
  <table *ngIf="!loading && users.length > 0 && searchQuery.length === 0" class="table table-hover shadow rounded">
    <thead class="table-primary">
      <tr>
        <th>ğŸ‘¤ Name</th>
        <th>ğŸ“§ Email</th>
        <th>ğŸ­ Role</th>
        <th colspan="2" class="text-center">âš¡ Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td class="text-center">
          <button class="btn btn-primary btn-sm" (click)="goToDetails(user._id)">
            Details
          </button>
        </td>
        <td class="text-center">
          <button class="btn btn-danger btn-sm" (click)="deleteUser(user._id)">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
